<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
 <title>Gradebook Module</title>
 <!-- for MSIE 10 on Windows 8 -->
 <meta http-equiv="X-UA-Compatible" content="requiresActiveX=true"/>
 <link rel="stylesheet" href="http://web.mit.edu/music21/music21j/css/m21theory.css" type="text/css" />
 <meta http-equiv="content-type" content="text/html; charset=utf-8" />
 <script data-main="../../src/m21theory" src="../../ext/require/require.js"></script>
</head>
<body>
<script type="text/javascript">
require(['m21theory'], function() {
    m21theory.style.apply({loadCss: false});
    var serverSettings = m21theory.serverSettings;
    var ajax = serverSettings.makeAjax;
    var $grade_password = $("<div>Gradebook Password: <input type='password' id='gradebookPw'></div>")
    var $bb = $('.body#testBank');
    $bb.append($grade_password);
    
    var $commands = $("<ul></ul>");
    var $comments = $("<li><a href='#'>Get comments</a></li>").on('click', function () {
        var gpw = $("#gradebookPw").val();
        ajax({
            gradebookPw: gpw,
            function: 'getComments'    
        }, {
            url: serverSettings.gradebookUrl,
            success: function (js) {
                for (var i = 0; i < js.comments.length; i++) { 
                    console.log(js.comments[i]);
                    var $inDiv = $("<div>" + js.comments[i][0] + "</div>");
                    $bb.append($inDiv);   
                }
                console.log($bb);
            },
        });    
    
    })
    $commands.append($comments);
    $bb.append($commands);
});

</script>
</body>
</html>